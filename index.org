#+OPTIONS: title:nil
#+OPTIONS: num:nil 
#+OPTIONS: toc:nil
#+OPTIONS: html-style:nil 
#+OPTIONS: html-scripts:nil
#+OPTIONS: html-preamble:nil 
#+OPTIONS: html-postamble:nil
#+TITLE: ELPA 镜像 - Emacs China
#+AUTHOR: Emacs China
#+HTML_HEAD: <link rel="apple-touch-icon" type="image/png" href="https://emacs-china.org/uploads/default/original/1X/ebb284b1e209aa93c9744227e1374130f8190aec.png">
#+HTML_HEAD: <link rel="icon" sizes="144x144" href="https://emacs-china.org/uploads/default/original/1X/ebb284b1e209aa93c9744227e1374130f8190aec.png">
#+HTML_HEAD: <link rel="icon" type="image/png" href="https://emacs-china.org/uploads/default/original/1X/477ac7ed14175dfd2deb65ee3c3d83d18a8906b8.ico">
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="./css/font-awesome/css/font-awesome.min.css">
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="./css/style.css">

#+BEGIN_HTML
<nav id="bar">
    <div>
        <a class="nav-link blue" href="https://emacs-china.org/"><i class="fa fa-group" aria-hidden="true"></i>&nbsp;Forum</a>
        <a class="nav-link yellow" href="http://book.emacs-china.org" target="_blank"><i class="fa fa-book" aria-hidden="true"></i>&nbsp;Book</a>
        <a class="nav-link violet" href="http://elpa.emacs-china.org"><i class="fa fa-server" aria-hidden="true"></i>&nbsp;ELPA</a>
        <a class="fork-us" href="https://github.com/emacs-china" target="_blank"><i class="fa fa-github" aria-hidden="true"></i>
            &nbsp;Fork Us</a>
    </div>
</nav>
<div class="heading">
    <h1 class="heading-main">
        <span class="img">
            <img class="emacs-china-logo" src="./imgs/logo.png"/>
        </span>
        <span class="text">ELPA 镜像</span>
    </h1>
</div>
#+END_HTML

/注：本镜像搭建在 [[https://github.com/zilongshanren][@zilongshanren]] 的 VPS 上，带宽有限，可以考虑使用 [[https://mirrors.tuna.tsinghua.edu.cn/help/elpa/][清华大学 TUNA 镜像源的 ELPA 镜像]]/

| ELPA              | 镜像地址                                    |
|-------------------+---------------------------------------------|
| [[http://elpa.gnu.org/][GNU ELPA]]          | http://elpa.zilongshanren.com/gnu/          |
| [[https://melpa.org/][MELPA]]             | http://elpa.zilongshanren.com/melpa/        |
| [[http://stable.melpa.org/#/][MELPA Stable]]      | http://elpa.zilongshanren.com/melpa-stable/ |
| [[Https://marmalade-repo.org/][Marmalade]]         | http://elpa.zilongshanren.com/marmalade/    |
| [[http://orgmode.org/elpa.html][Org]]               | http://elpa.zilongshanren.com/org/          |

** 使用方法

根据你的需求，设置 ~package-archives~ ，比如用 GNU ELPA 和 MELPA：

#+BEGIN_SRC emacs-lisp
  (setq package-archives '(("gnu"   . "http://elpa.zilongshanren.com/gnu/")
                           ("melpa" . "http://elpa.zilongshanren.com/melpa/")))
#+END_SRC

*** Spacemacs 用户

添加下面的代码到 ~.spacemacs~ 的 ~dotspacemacs/user-init()~

#+BEGIN_SRC emacs-lisp
  (setq configuration-layer--elpa-archives
      '(("melpa-cn" . "http://elpa.zilongshanren.com/melpa/")
        ("org-cn"   . "http://elpa.zilongshanren.com/org/")
        ("gnu-cn"   . "http://elpa.zilongshanren.com/gnu/")))
#+END_SRC

*** Cask 用户

[[https://github.com/cask/cask][Cask]] 是一个 Emacs Lisp 的项目管理工具。这里还是以 GNU ELPA 和 MELPA 为例，在添加下面的代码到 ~Cask~

#+BEGIN_SRC emacs-lisp
  (source "gnu"   "http://elpa.zilongshanren.com/gnu/")
  (source "melpa" "http://elpa.zilongshanren.com/melpa/")
#+END_SRC

** 镜像说明

每八小时更新 [[https://travis-ci.org/emacs-china/elpa][file:https://travis-ci.org/emacs-china/elpa.svg?branch=master]] 一次。

由于 =emacs-china.org= 没有备案，我们用了[[http://zilongshanren.com/][子龙山人]]提供的子域名。即使将来 \\
=emacs-china.org= 备案了， =elpa.zilongshanren.com= 也会继续工作。

** 制作新的镜像

上游的 ELPA 目前都还没有提供制作镜像的方法，如果你也需要制作镜像，可以直接同步本镜像，rsync 地址为

#+BEGIN_SRC undefined
rsync://elpa.zilongshanren.com/elpa/
#+END_SRC

本镜像目前（2016-06-03）收录了的 5 个 常见的 ELPA，共占 536M

#+BEGIN_SRC undefined
536M      /elpa

50M       /elpa/gnu
282M      /elpa/melpa
129M      /elpa/melpa-stable
63M       /elpa/marmalade
13M       /elpa/org
#+END_SRC

** 报告问题

https://github.com/emacs-china/elpa/issues


** 致谢

[[http://zilongshanren.com/][子龙山人]] 提供域名和 VPS

[[https://travis-ci.org/][Travis CI]] 同步的工作在它上面完成，使得我们不用购买一台国外的 VPS

[[https://github.com/li-xinyang][li-xinyang (Li Xinyang)]] 设计 http://elpa.emacs-china.org/ 这个页面

[[https://github.com/qinshulei][qinshulei (Qin Shulei)]] 改进 http://elpa.emacs-china.org/ 这个页面
